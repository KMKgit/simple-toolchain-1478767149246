{"filter":false,"title":"auth2_server.js","tooltip":"/auth2_server.js","undoManager":{"mark":100,"position":100,"stack":[[{"start":{"row":505,"column":2},"end":{"row":505,"column":3},"action":"insert","lines":["f"],"id":8998}],[{"start":{"row":505,"column":3},"end":{"row":505,"column":4},"action":"insert","lines":["u"],"id":8999}],[{"start":{"row":505,"column":4},"end":{"row":505,"column":5},"action":"insert","lines":["n"],"id":9000}],[{"start":{"row":505,"column":5},"end":{"row":505,"column":6},"action":"insert","lines":["c"],"id":9001}],[{"start":{"row":505,"column":6},"end":{"row":505,"column":7},"action":"insert","lines":["t"],"id":9002}],[{"start":{"row":505,"column":7},"end":{"row":505,"column":8},"action":"insert","lines":["i"],"id":9003}],[{"start":{"row":505,"column":8},"end":{"row":505,"column":9},"action":"insert","lines":["o"],"id":9004}],[{"start":{"row":505,"column":9},"end":{"row":505,"column":10},"action":"insert","lines":["n"],"id":9005}],[{"start":{"row":505,"column":10},"end":{"row":505,"column":12},"action":"insert","lines":["()"],"id":9006}],[{"start":{"row":505,"column":11},"end":{"row":505,"column":12},"action":"insert","lines":["r"],"id":9007}],[{"start":{"row":505,"column":12},"end":{"row":505,"column":13},"action":"insert","lines":["e"],"id":9008}],[{"start":{"row":505,"column":13},"end":{"row":505,"column":14},"action":"insert","lines":["q"],"id":9009}],[{"start":{"row":505,"column":14},"end":{"row":505,"column":15},"action":"insert","lines":[","],"id":9010}],[{"start":{"row":505,"column":15},"end":{"row":505,"column":16},"action":"insert","lines":[" "],"id":9011}],[{"start":{"row":505,"column":16},"end":{"row":505,"column":17},"action":"insert","lines":["r"],"id":9012}],[{"start":{"row":505,"column":17},"end":{"row":505,"column":18},"action":"insert","lines":["e"],"id":9013}],[{"start":{"row":505,"column":18},"end":{"row":505,"column":19},"action":"insert","lines":["s"],"id":9014}],[{"start":{"row":505,"column":20},"end":{"row":505,"column":21},"action":"insert","lines":[" "],"id":9015}],[{"start":{"row":505,"column":21},"end":{"row":505,"column":22},"action":"insert","lines":["{"],"id":9016}],[{"start":{"row":505,"column":22},"end":{"row":507,"column":3},"action":"insert","lines":["","    ","  }"],"id":9017}],[{"start":{"row":506,"column":4},"end":{"row":507,"column":0},"action":"insert","lines":["",""],"id":9018},{"start":{"row":507,"column":0},"end":{"row":507,"column":4},"action":"insert","lines":["    "]}],[{"start":{"row":507,"column":4},"end":{"row":507,"column":5},"action":"insert","lines":["}"],"id":9019},{"start":{"row":507,"column":0},"end":{"row":507,"column":4},"action":"remove","lines":["    "]},{"start":{"row":507,"column":0},"end":{"row":507,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":508,"column":3},"end":{"row":509,"column":0},"action":"insert","lines":["",""],"id":9020},{"start":{"row":509,"column":0},"end":{"row":509,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":509,"column":2},"end":{"row":509,"column":3},"action":"insert","lines":["}"],"id":9021}],[{"start":{"row":507,"column":0},"end":{"row":509,"column":0},"action":"remove","lines":["  }","  }",""],"id":9022}],[{"start":{"row":507,"column":3},"end":{"row":508,"column":0},"action":"insert","lines":["",""],"id":9023},{"start":{"row":508,"column":0},"end":{"row":508,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":508,"column":2},"end":{"row":508,"column":3},"action":"insert","lines":["}"],"id":9024}],[{"start":{"row":508,"column":2},"end":{"row":508,"column":3},"action":"remove","lines":["}"],"id":9025}],[{"start":{"row":508,"column":0},"end":{"row":508,"column":2},"action":"remove","lines":["  "],"id":9026}],[{"start":{"row":507,"column":3},"end":{"row":508,"column":0},"action":"remove","lines":["",""],"id":9027}],[{"start":{"row":507,"column":3},"end":{"row":507,"column":5},"action":"insert","lines":["()"],"id":9028}],[{"start":{"row":507,"column":3},"end":{"row":507,"column":5},"action":"remove","lines":["()"],"id":9029}],[{"start":{"row":507,"column":3},"end":{"row":507,"column":4},"action":"insert","lines":[")"],"id":9030}],[{"start":{"row":507,"column":4},"end":{"row":507,"column":5},"action":"insert","lines":[";"],"id":9031}],[{"start":{"row":507,"column":5},"end":{"row":507,"column":6},"action":"insert","lines":[";"],"id":9032}],[{"start":{"row":507,"column":4},"end":{"row":507,"column":5},"action":"remove","lines":[";"],"id":9033}],[{"start":{"row":504,"column":51},"end":{"row":504,"column":52},"action":"remove","lines":[")"],"id":9035}],[{"start":{"row":506,"column":2},"end":{"row":506,"column":4},"action":"insert","lines":["  "],"id":9036}],[{"start":{"row":506,"column":4},"end":{"row":506,"column":5},"action":"insert","lines":["c"],"id":9037}],[{"start":{"row":506,"column":5},"end":{"row":506,"column":6},"action":"insert","lines":["o"],"id":9038}],[{"start":{"row":506,"column":6},"end":{"row":506,"column":7},"action":"insert","lines":["n"],"id":9039}],[{"start":{"row":506,"column":7},"end":{"row":506,"column":8},"action":"insert","lines":["s"],"id":9040}],[{"start":{"row":506,"column":8},"end":{"row":506,"column":9},"action":"insert","lines":["o"],"id":9041}],[{"start":{"row":506,"column":9},"end":{"row":506,"column":10},"action":"insert","lines":["l"],"id":9042}],[{"start":{"row":506,"column":10},"end":{"row":506,"column":11},"action":"insert","lines":["e"],"id":9043}],[{"start":{"row":506,"column":11},"end":{"row":506,"column":12},"action":"insert","lines":["."],"id":9044}],[{"start":{"row":506,"column":12},"end":{"row":506,"column":13},"action":"insert","lines":["l"],"id":9045}],[{"start":{"row":506,"column":13},"end":{"row":506,"column":14},"action":"insert","lines":["o"],"id":9046}],[{"start":{"row":506,"column":14},"end":{"row":506,"column":15},"action":"insert","lines":["g"],"id":9047}],[{"start":{"row":506,"column":15},"end":{"row":506,"column":17},"action":"insert","lines":["()"],"id":9048}],[{"start":{"row":506,"column":16},"end":{"row":506,"column":18},"action":"insert","lines":["''"],"id":9049}],[{"start":{"row":506,"column":17},"end":{"row":506,"column":18},"action":"insert","lines":["/"],"id":9050}],[{"start":{"row":506,"column":18},"end":{"row":506,"column":19},"action":"insert","lines":["a"],"id":9051}],[{"start":{"row":506,"column":19},"end":{"row":506,"column":20},"action":"insert","lines":["p"],"id":9052}],[{"start":{"row":506,"column":20},"end":{"row":506,"column":21},"action":"insert","lines":["i"],"id":9053}],[{"start":{"row":506,"column":21},"end":{"row":506,"column":22},"action":"insert","lines":["/"],"id":9054}],[{"start":{"row":506,"column":22},"end":{"row":506,"column":23},"action":"insert","lines":["."],"id":9055}],[{"start":{"row":506,"column":22},"end":{"row":506,"column":23},"action":"remove","lines":["."],"id":9056}],[{"start":{"row":506,"column":22},"end":{"row":506,"column":23},"action":"insert","lines":["r"],"id":9057}],[{"start":{"row":506,"column":23},"end":{"row":506,"column":24},"action":"insert","lines":["e"],"id":9058}],[{"start":{"row":506,"column":24},"end":{"row":506,"column":25},"action":"insert","lines":["q"],"id":9059}],[{"start":{"row":506,"column":25},"end":{"row":506,"column":26},"action":"insert","lines":["u"],"id":9060}],[{"start":{"row":506,"column":26},"end":{"row":506,"column":27},"action":"insert","lines":["e"],"id":9061}],[{"start":{"row":506,"column":27},"end":{"row":506,"column":28},"action":"insert","lines":["s"],"id":9062}],[{"start":{"row":506,"column":28},"end":{"row":506,"column":29},"action":"insert","lines":["t"],"id":9063}],[{"start":{"row":506,"column":31},"end":{"row":506,"column":32},"action":"insert","lines":[";"],"id":9064}],[{"start":{"row":508,"column":2},"end":{"row":509,"column":0},"action":"insert","lines":["",""],"id":9065},{"start":{"row":509,"column":0},"end":{"row":509,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":509,"column":2},"end":{"row":558,"column":3},"action":"insert","lines":["","app.post('/run', login.ensureLoggedIn(), function(req, res, next) {","  printRequestLog(req);","  if (!req.user) return res.redirect('/');","  ","  var body = req.body;","  var exePy = CMD[body.method];","  if (!exePy) {","    return res.json({","      err: '지원하지 않는 method입니다.'  ","    });","  }","","  var randNum = randtoken.uid(GLOBAL.APIKEY_LENGTH);","  var inp = body.inp;","  var keys = [];","  var values = [];","  for (var key in inp) {","    keys.push(key);","    values.push(inp[key]);","  }","  ","  var inpStr = keys.join(',') + '\\n' + values.join(',');","  console.log(inpStr);","  fs.writeFile(__dirname + '/data/' + body.apiKey + '/request/' + randNum + '.csv', inpStr, 'utf-8', function(err, result) {","    if (err) {","      printError(err);","      return res.json({","        err: err","      });","    }      ","    var exeParam = [__dirname + '/py/' + exePy + '/request_' + exePy + '.py', body.apiKey, randNum];","    exeParam.push(randNum);","    execFile('python', exeParam, function(err, stdout, stderr) {","      console.log(err);","      console.log(stdout);","      console.log(stderr);","      fs.readFile(__dirname + '/data/' + exePy + '/request/' + randNum + '.req', 'utf-8', function(err, result) {","        if (err) {","          return res.json({","            err: err","          });","        }","        return res.json({","          data: result","        });","      });","    });","  });","});"],"id":9066}],[{"start":{"row":521,"column":0},"end":{"row":522,"column":0},"action":"remove","lines":["",""],"id":9067}],[{"start":{"row":529,"column":0},"end":{"row":530,"column":0},"action":"remove","lines":["  ",""],"id":9068}],[{"start":{"row":504,"column":52},"end":{"row":504,"column":53},"action":"insert","lines":[","],"id":9069}],[{"start":{"row":504,"column":53},"end":{"row":504,"column":54},"action":"insert","lines":[" "],"id":9070}],[{"start":{"row":504,"column":53},"end":{"row":504,"column":54},"action":"remove","lines":[" "],"id":9071}],[{"start":{"row":504,"column":52},"end":{"row":504,"column":53},"action":"remove","lines":[","],"id":9072}],[{"start":{"row":504,"column":52},"end":{"row":504,"column":53},"action":"insert","lines":[" "],"id":9073}],[{"start":{"row":504,"column":53},"end":{"row":504,"column":54},"action":"insert","lines":["f"],"id":9074}],[{"start":{"row":504,"column":54},"end":{"row":504,"column":55},"action":"insert","lines":["u"],"id":9075}],[{"start":{"row":504,"column":55},"end":{"row":504,"column":56},"action":"insert","lines":["n"],"id":9076}],[{"start":{"row":504,"column":56},"end":{"row":504,"column":57},"action":"insert","lines":["c"],"id":9077}],[{"start":{"row":504,"column":57},"end":{"row":504,"column":58},"action":"insert","lines":["t"],"id":9078}],[{"start":{"row":504,"column":58},"end":{"row":504,"column":59},"action":"insert","lines":["i"],"id":9079}],[{"start":{"row":504,"column":59},"end":{"row":504,"column":60},"action":"insert","lines":["o"],"id":9080}],[{"start":{"row":504,"column":60},"end":{"row":504,"column":61},"action":"insert","lines":["n"],"id":9081}],[{"start":{"row":504,"column":61},"end":{"row":504,"column":63},"action":"insert","lines":["()"],"id":9082}],[{"start":{"row":504,"column":62},"end":{"row":504,"column":63},"action":"insert","lines":["r"],"id":9083}],[{"start":{"row":504,"column":63},"end":{"row":504,"column":64},"action":"insert","lines":["e"],"id":9084}],[{"start":{"row":504,"column":64},"end":{"row":504,"column":65},"action":"insert","lines":["q"],"id":9085}],[{"start":{"row":504,"column":65},"end":{"row":504,"column":66},"action":"insert","lines":[","],"id":9086}],[{"start":{"row":504,"column":66},"end":{"row":504,"column":67},"action":"insert","lines":[" "],"id":9087}],[{"start":{"row":504,"column":67},"end":{"row":504,"column":68},"action":"insert","lines":["r"],"id":9088}],[{"start":{"row":504,"column":68},"end":{"row":504,"column":69},"action":"insert","lines":["e"],"id":9089}],[{"start":{"row":504,"column":69},"end":{"row":504,"column":70},"action":"insert","lines":["s"],"id":9090}],[{"start":{"row":504,"column":71},"end":{"row":504,"column":72},"action":"insert","lines":[" "],"id":9091}],[{"start":{"row":504,"column":72},"end":{"row":504,"column":73},"action":"insert","lines":["{"],"id":9092}],[{"start":{"row":503,"column":23},"end":{"row":504,"column":0},"action":"remove","lines":["",""],"id":9093}],[{"start":{"row":503,"column":23},"end":{"row":503,"column":24},"action":"remove","lines":[" "],"id":9094}],[{"start":{"row":504,"column":0},"end":{"row":510,"column":0},"action":"remove","lines":["  function(req, res) {","    console.log('/api/request');  ","  });","  ","  ","app.post('/run', login.ensureLoggedIn(), function(req, res, next) {",""],"id":9095}],[{"start":{"row":1,"column":31},"end":{"row":2,"column":38},"action":"insert","lines":["","var randtoken = require('rand-token');"],"id":9096}],[{"start":{"row":1,"column":23},"end":{"row":1,"column":24},"action":"insert","lines":["j"],"id":9097}],[{"start":{"row":1,"column":24},"end":{"row":1,"column":25},"action":"insert","lines":["s"],"id":9098}],[{"start":{"row":1,"column":25},"end":{"row":1,"column":26},"action":"insert","lines":["/"],"id":9099}]]},"ace":{"folds":[],"scrolltop":0,"scrollleft":0,"selection":{"start":{"row":1,"column":25},"end":{"row":1,"column":25},"isBackwards":true},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":0},"timestamp":1477220840774,"hash":"7f3a97ba8c728b9c7e2749460f69e73ece1bc9dc"}