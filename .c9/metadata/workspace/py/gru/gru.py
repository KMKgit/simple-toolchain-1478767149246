{"filter":false,"title":"gru.py","tooltip":"/py/gru/gru.py","ace":{"folds":[],"scrolltop":828,"scrollleft":0,"selection":{"start":{"row":67,"column":38},"end":{"row":67,"column":42},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":58,"state":"start","mode":"ace/mode/python"}},"hash":"e57d2bd06de2c2ec80c3b9389bcd3a246fe24742","undoManager":{"mark":41,"position":41,"stack":[[{"start":{"row":93,"column":12},"end":{"row":93,"column":16},"action":"remove","lines":["LSTM"],"id":2},{"start":{"row":93,"column":12},"end":{"row":93,"column":13},"action":"insert","lines":["G"]}],[{"start":{"row":93,"column":13},"end":{"row":93,"column":14},"action":"insert","lines":["R"],"id":3}],[{"start":{"row":93,"column":14},"end":{"row":93,"column":15},"action":"insert","lines":["U"],"id":4}],[{"start":{"row":98,"column":16},"end":{"row":98,"column":20},"action":"remove","lines":["LSTM"],"id":6},{"start":{"row":98,"column":16},"end":{"row":98,"column":19},"action":"insert","lines":["GRU"]}],[{"start":{"row":100,"column":16},"end":{"row":100,"column":20},"action":"remove","lines":["LSTM"],"id":7},{"start":{"row":100,"column":16},"end":{"row":100,"column":19},"action":"insert","lines":["GRU"]}],[{"start":{"row":67,"column":2},"end":{"row":67,"column":91},"action":"remove","lines":["#with codecs.open(join( PATH + '/py/lstm/test.csv'), encoding = 'utf-8-sig') as csv_file:"],"id":8}],[{"start":{"row":66,"column":121},"end":{"row":67,"column":2},"action":"remove","lines":["","  "],"id":9}],[{"start":{"row":67,"column":2},"end":{"row":68,"column":2},"action":"insert","lines":["#with codecs.open(join( PATH + '/py/lstm/test.csv'), encoding = 'utf-8-sig') as csv_file:","  "],"id":10},{"start":{"row":93,"column":12},"end":{"row":93,"column":15},"action":"remove","lines":["GRU"]},{"start":{"row":93,"column":12},"end":{"row":93,"column":16},"action":"insert","lines":["LSTM"]},{"start":{"row":98,"column":16},"end":{"row":98,"column":19},"action":"remove","lines":["GRU"]},{"start":{"row":98,"column":16},"end":{"row":98,"column":20},"action":"insert","lines":["LSTM"]},{"start":{"row":100,"column":16},"end":{"row":100,"column":19},"action":"remove","lines":["GRU"]},{"start":{"row":100,"column":16},"end":{"row":100,"column":20},"action":"insert","lines":["LSTM"]}],[{"start":{"row":33,"column":0},"end":{"row":33,"column":4},"action":"remove","lines":["try:"],"id":11}],[{"start":{"row":34,"column":0},"end":{"row":34,"column":2},"action":"remove","lines":["  "],"id":12},{"start":{"row":35,"column":0},"end":{"row":35,"column":2},"action":"remove","lines":["  "]},{"start":{"row":36,"column":0},"end":{"row":36,"column":2},"action":"remove","lines":["  "]},{"start":{"row":37,"column":0},"end":{"row":37,"column":2},"action":"remove","lines":["  "]},{"start":{"row":38,"column":0},"end":{"row":38,"column":2},"action":"remove","lines":["  "]},{"start":{"row":39,"column":0},"end":{"row":39,"column":2},"action":"remove","lines":["  "]},{"start":{"row":40,"column":0},"end":{"row":40,"column":2},"action":"remove","lines":["  "]},{"start":{"row":41,"column":0},"end":{"row":41,"column":2},"action":"remove","lines":["  "]},{"start":{"row":42,"column":0},"end":{"row":42,"column":2},"action":"remove","lines":["  "]},{"start":{"row":43,"column":0},"end":{"row":43,"column":2},"action":"remove","lines":["  "]},{"start":{"row":44,"column":0},"end":{"row":44,"column":2},"action":"remove","lines":["  "]},{"start":{"row":45,"column":0},"end":{"row":45,"column":2},"action":"remove","lines":["  "]},{"start":{"row":46,"column":0},"end":{"row":46,"column":2},"action":"remove","lines":["  "]},{"start":{"row":47,"column":0},"end":{"row":47,"column":2},"action":"remove","lines":["  "]},{"start":{"row":48,"column":0},"end":{"row":48,"column":2},"action":"remove","lines":["  "]},{"start":{"row":49,"column":0},"end":{"row":49,"column":2},"action":"remove","lines":["  "]},{"start":{"row":50,"column":0},"end":{"row":50,"column":2},"action":"remove","lines":["  "]},{"start":{"row":51,"column":0},"end":{"row":51,"column":2},"action":"remove","lines":["  "]},{"start":{"row":52,"column":0},"end":{"row":52,"column":2},"action":"remove","lines":["  "]},{"start":{"row":53,"column":0},"end":{"row":53,"column":2},"action":"remove","lines":["  "]},{"start":{"row":54,"column":0},"end":{"row":54,"column":2},"action":"remove","lines":["  "]},{"start":{"row":55,"column":0},"end":{"row":55,"column":2},"action":"remove","lines":["  "]},{"start":{"row":56,"column":0},"end":{"row":56,"column":2},"action":"remove","lines":["  "]},{"start":{"row":57,"column":0},"end":{"row":57,"column":2},"action":"remove","lines":["  "]},{"start":{"row":58,"column":0},"end":{"row":58,"column":2},"action":"remove","lines":["  "]},{"start":{"row":59,"column":0},"end":{"row":59,"column":2},"action":"remove","lines":["  "]},{"start":{"row":60,"column":0},"end":{"row":60,"column":2},"action":"remove","lines":["  "]},{"start":{"row":61,"column":0},"end":{"row":61,"column":2},"action":"remove","lines":["  "]},{"start":{"row":62,"column":0},"end":{"row":62,"column":2},"action":"remove","lines":["  "]},{"start":{"row":63,"column":0},"end":{"row":63,"column":2},"action":"remove","lines":["  "]},{"start":{"row":64,"column":0},"end":{"row":64,"column":2},"action":"remove","lines":["  "]},{"start":{"row":65,"column":0},"end":{"row":65,"column":2},"action":"remove","lines":["  "]},{"start":{"row":66,"column":0},"end":{"row":66,"column":2},"action":"remove","lines":["  "]},{"start":{"row":67,"column":0},"end":{"row":67,"column":2},"action":"remove","lines":["  "]},{"start":{"row":68,"column":0},"end":{"row":68,"column":2},"action":"remove","lines":["  "]},{"start":{"row":69,"column":0},"end":{"row":69,"column":2},"action":"remove","lines":["  "]},{"start":{"row":70,"column":0},"end":{"row":70,"column":2},"action":"remove","lines":["  "]},{"start":{"row":71,"column":0},"end":{"row":71,"column":2},"action":"remove","lines":["  "]},{"start":{"row":72,"column":0},"end":{"row":72,"column":2},"action":"remove","lines":["  "]},{"start":{"row":73,"column":0},"end":{"row":73,"column":2},"action":"remove","lines":["  "]},{"start":{"row":74,"column":0},"end":{"row":74,"column":2},"action":"remove","lines":["  "]},{"start":{"row":75,"column":0},"end":{"row":75,"column":2},"action":"remove","lines":["  "]},{"start":{"row":76,"column":0},"end":{"row":76,"column":2},"action":"remove","lines":["  "]},{"start":{"row":77,"column":0},"end":{"row":77,"column":2},"action":"remove","lines":["  "]},{"start":{"row":78,"column":0},"end":{"row":78,"column":2},"action":"remove","lines":["  "]},{"start":{"row":79,"column":0},"end":{"row":79,"column":2},"action":"remove","lines":["  "]},{"start":{"row":80,"column":0},"end":{"row":80,"column":2},"action":"remove","lines":["  "]},{"start":{"row":81,"column":0},"end":{"row":81,"column":2},"action":"remove","lines":["  "]},{"start":{"row":82,"column":0},"end":{"row":82,"column":2},"action":"remove","lines":["  "]},{"start":{"row":83,"column":0},"end":{"row":83,"column":2},"action":"remove","lines":["  "]},{"start":{"row":84,"column":0},"end":{"row":84,"column":2},"action":"remove","lines":["  "]},{"start":{"row":85,"column":0},"end":{"row":85,"column":2},"action":"remove","lines":["  "]},{"start":{"row":86,"column":0},"end":{"row":86,"column":2},"action":"remove","lines":["  "]},{"start":{"row":87,"column":0},"end":{"row":87,"column":2},"action":"remove","lines":["  "]},{"start":{"row":88,"column":0},"end":{"row":88,"column":2},"action":"remove","lines":["  "]},{"start":{"row":89,"column":0},"end":{"row":89,"column":2},"action":"remove","lines":["  "]},{"start":{"row":90,"column":0},"end":{"row":90,"column":2},"action":"remove","lines":["  "]},{"start":{"row":91,"column":0},"end":{"row":91,"column":2},"action":"remove","lines":["  "]},{"start":{"row":92,"column":0},"end":{"row":92,"column":2},"action":"remove","lines":["  "]},{"start":{"row":93,"column":0},"end":{"row":93,"column":2},"action":"remove","lines":["  "]},{"start":{"row":94,"column":0},"end":{"row":94,"column":2},"action":"remove","lines":["  "]},{"start":{"row":95,"column":0},"end":{"row":95,"column":2},"action":"remove","lines":["  "]},{"start":{"row":96,"column":0},"end":{"row":96,"column":2},"action":"remove","lines":["  "]},{"start":{"row":97,"column":0},"end":{"row":97,"column":2},"action":"remove","lines":["  "]},{"start":{"row":98,"column":0},"end":{"row":98,"column":2},"action":"remove","lines":["  "]},{"start":{"row":99,"column":0},"end":{"row":99,"column":2},"action":"remove","lines":["  "]},{"start":{"row":100,"column":0},"end":{"row":100,"column":2},"action":"remove","lines":["  "]},{"start":{"row":101,"column":0},"end":{"row":101,"column":2},"action":"remove","lines":["  "]},{"start":{"row":102,"column":0},"end":{"row":102,"column":2},"action":"remove","lines":["  "]},{"start":{"row":103,"column":0},"end":{"row":103,"column":2},"action":"remove","lines":["  "]},{"start":{"row":104,"column":0},"end":{"row":104,"column":2},"action":"remove","lines":["  "]},{"start":{"row":105,"column":0},"end":{"row":105,"column":2},"action":"remove","lines":["  "]},{"start":{"row":106,"column":0},"end":{"row":106,"column":2},"action":"remove","lines":["  "]},{"start":{"row":107,"column":0},"end":{"row":107,"column":2},"action":"remove","lines":["  "]},{"start":{"row":108,"column":0},"end":{"row":108,"column":2},"action":"remove","lines":["  "]},{"start":{"row":109,"column":0},"end":{"row":109,"column":2},"action":"remove","lines":["  "]},{"start":{"row":110,"column":0},"end":{"row":110,"column":2},"action":"remove","lines":["  "]},{"start":{"row":111,"column":0},"end":{"row":111,"column":2},"action":"remove","lines":["  "]},{"start":{"row":112,"column":0},"end":{"row":112,"column":2},"action":"remove","lines":["  "]},{"start":{"row":113,"column":0},"end":{"row":113,"column":2},"action":"remove","lines":["  "]},{"start":{"row":114,"column":0},"end":{"row":114,"column":2},"action":"remove","lines":["  "]},{"start":{"row":115,"column":0},"end":{"row":115,"column":2},"action":"remove","lines":["  "]},{"start":{"row":116,"column":0},"end":{"row":116,"column":2},"action":"remove","lines":["  "]},{"start":{"row":117,"column":0},"end":{"row":117,"column":2},"action":"remove","lines":["  "]},{"start":{"row":118,"column":0},"end":{"row":118,"column":2},"action":"remove","lines":["  "]},{"start":{"row":119,"column":0},"end":{"row":119,"column":2},"action":"remove","lines":["  "]},{"start":{"row":120,"column":0},"end":{"row":120,"column":2},"action":"remove","lines":["  "]},{"start":{"row":121,"column":0},"end":{"row":121,"column":2},"action":"remove","lines":["  "]},{"start":{"row":122,"column":0},"end":{"row":122,"column":2},"action":"remove","lines":["  "]},{"start":{"row":123,"column":0},"end":{"row":123,"column":2},"action":"remove","lines":["  "]},{"start":{"row":124,"column":0},"end":{"row":124,"column":2},"action":"remove","lines":["  "]},{"start":{"row":125,"column":0},"end":{"row":125,"column":2},"action":"remove","lines":["  "]},{"start":{"row":126,"column":0},"end":{"row":126,"column":2},"action":"remove","lines":["  "]},{"start":{"row":127,"column":0},"end":{"row":127,"column":2},"action":"remove","lines":["  "]},{"start":{"row":128,"column":0},"end":{"row":128,"column":2},"action":"remove","lines":["  "]},{"start":{"row":129,"column":0},"end":{"row":129,"column":2},"action":"remove","lines":["  "]},{"start":{"row":130,"column":0},"end":{"row":130,"column":2},"action":"remove","lines":["  "]},{"start":{"row":131,"column":0},"end":{"row":131,"column":2},"action":"remove","lines":["  "]},{"start":{"row":132,"column":0},"end":{"row":132,"column":2},"action":"remove","lines":["  "]},{"start":{"row":133,"column":0},"end":{"row":133,"column":2},"action":"remove","lines":["  "]},{"start":{"row":134,"column":0},"end":{"row":134,"column":2},"action":"remove","lines":["  "]},{"start":{"row":135,"column":0},"end":{"row":135,"column":2},"action":"remove","lines":["  "]}],[{"start":{"row":135,"column":0},"end":{"row":138,"column":0},"action":"remove","lines":["","except:","  print \"ERROR : \", sys.exc_info()[0]",""],"id":13}],[{"start":{"row":132,"column":67},"end":{"row":132,"column":68},"action":"insert","lines":["g"],"id":14}],[{"start":{"row":132,"column":68},"end":{"row":132,"column":69},"action":"insert","lines":["r"],"id":15}],[{"start":{"row":132,"column":69},"end":{"row":132,"column":70},"action":"insert","lines":["u"],"id":16}],[{"start":{"row":132,"column":67},"end":{"row":132,"column":70},"action":"remove","lines":["gru"],"id":17}],[{"start":{"row":112,"column":49},"end":{"row":112,"column":50},"action":"remove","lines":["1"],"id":18}],[{"start":{"row":112,"column":49},"end":{"row":112,"column":50},"action":"insert","lines":["0"],"id":19}],[{"start":{"row":135,"column":0},"end":{"row":138,"column":0},"action":"insert","lines":["","except:","  print >> sys.stderr, sys.exc_info()[0]",""],"id":20}],[{"start":{"row":66,"column":0},"end":{"row":66,"column":2},"action":"insert","lines":["  "],"id":21},{"start":{"row":67,"column":0},"end":{"row":67,"column":2},"action":"insert","lines":["  "]},{"start":{"row":68,"column":0},"end":{"row":68,"column":2},"action":"insert","lines":["  "]},{"start":{"row":69,"column":0},"end":{"row":69,"column":2},"action":"insert","lines":["  "]},{"start":{"row":70,"column":0},"end":{"row":70,"column":2},"action":"insert","lines":["  "]},{"start":{"row":71,"column":0},"end":{"row":71,"column":2},"action":"insert","lines":["  "]},{"start":{"row":72,"column":0},"end":{"row":72,"column":2},"action":"insert","lines":["  "]},{"start":{"row":73,"column":0},"end":{"row":73,"column":2},"action":"insert","lines":["  "]},{"start":{"row":74,"column":0},"end":{"row":74,"column":2},"action":"insert","lines":["  "]},{"start":{"row":75,"column":0},"end":{"row":75,"column":2},"action":"insert","lines":["  "]},{"start":{"row":76,"column":0},"end":{"row":76,"column":2},"action":"insert","lines":["  "]},{"start":{"row":77,"column":0},"end":{"row":77,"column":2},"action":"insert","lines":["  "]},{"start":{"row":78,"column":0},"end":{"row":78,"column":2},"action":"insert","lines":["  "]},{"start":{"row":79,"column":0},"end":{"row":79,"column":2},"action":"insert","lines":["  "]},{"start":{"row":80,"column":0},"end":{"row":80,"column":2},"action":"insert","lines":["  "]},{"start":{"row":81,"column":0},"end":{"row":81,"column":2},"action":"insert","lines":["  "]},{"start":{"row":82,"column":0},"end":{"row":82,"column":2},"action":"insert","lines":["  "]},{"start":{"row":83,"column":0},"end":{"row":83,"column":2},"action":"insert","lines":["  "]},{"start":{"row":84,"column":0},"end":{"row":84,"column":2},"action":"insert","lines":["  "]},{"start":{"row":85,"column":0},"end":{"row":85,"column":2},"action":"insert","lines":["  "]},{"start":{"row":86,"column":0},"end":{"row":86,"column":2},"action":"insert","lines":["  "]},{"start":{"row":87,"column":0},"end":{"row":87,"column":2},"action":"insert","lines":["  "]},{"start":{"row":88,"column":0},"end":{"row":88,"column":2},"action":"insert","lines":["  "]},{"start":{"row":89,"column":0},"end":{"row":89,"column":2},"action":"insert","lines":["  "]},{"start":{"row":90,"column":0},"end":{"row":90,"column":2},"action":"insert","lines":["  "]},{"start":{"row":91,"column":0},"end":{"row":91,"column":2},"action":"insert","lines":["  "]},{"start":{"row":92,"column":0},"end":{"row":92,"column":2},"action":"insert","lines":["  "]},{"start":{"row":93,"column":0},"end":{"row":93,"column":2},"action":"insert","lines":["  "]},{"start":{"row":94,"column":0},"end":{"row":94,"column":2},"action":"insert","lines":["  "]},{"start":{"row":95,"column":0},"end":{"row":95,"column":2},"action":"insert","lines":["  "]},{"start":{"row":96,"column":0},"end":{"row":96,"column":2},"action":"insert","lines":["  "]},{"start":{"row":97,"column":0},"end":{"row":97,"column":2},"action":"insert","lines":["  "]},{"start":{"row":98,"column":0},"end":{"row":98,"column":2},"action":"insert","lines":["  "]},{"start":{"row":99,"column":0},"end":{"row":99,"column":2},"action":"insert","lines":["  "]},{"start":{"row":100,"column":0},"end":{"row":100,"column":2},"action":"insert","lines":["  "]},{"start":{"row":101,"column":0},"end":{"row":101,"column":2},"action":"insert","lines":["  "]},{"start":{"row":102,"column":0},"end":{"row":102,"column":2},"action":"insert","lines":["  "]},{"start":{"row":103,"column":0},"end":{"row":103,"column":2},"action":"insert","lines":["  "]},{"start":{"row":104,"column":0},"end":{"row":104,"column":2},"action":"insert","lines":["  "]},{"start":{"row":105,"column":0},"end":{"row":105,"column":2},"action":"insert","lines":["  "]},{"start":{"row":106,"column":0},"end":{"row":106,"column":2},"action":"insert","lines":["  "]},{"start":{"row":107,"column":0},"end":{"row":107,"column":2},"action":"insert","lines":["  "]},{"start":{"row":108,"column":0},"end":{"row":108,"column":2},"action":"insert","lines":["  "]},{"start":{"row":109,"column":0},"end":{"row":109,"column":2},"action":"insert","lines":["  "]},{"start":{"row":110,"column":0},"end":{"row":110,"column":2},"action":"insert","lines":["  "]},{"start":{"row":111,"column":0},"end":{"row":111,"column":2},"action":"insert","lines":["  "]},{"start":{"row":112,"column":0},"end":{"row":112,"column":2},"action":"insert","lines":["  "]},{"start":{"row":113,"column":0},"end":{"row":113,"column":2},"action":"insert","lines":["  "]},{"start":{"row":114,"column":0},"end":{"row":114,"column":2},"action":"insert","lines":["  "]},{"start":{"row":115,"column":0},"end":{"row":115,"column":2},"action":"insert","lines":["  "]},{"start":{"row":116,"column":0},"end":{"row":116,"column":2},"action":"insert","lines":["  "]},{"start":{"row":117,"column":0},"end":{"row":117,"column":2},"action":"insert","lines":["  "]},{"start":{"row":118,"column":0},"end":{"row":118,"column":2},"action":"insert","lines":["  "]},{"start":{"row":119,"column":0},"end":{"row":119,"column":2},"action":"insert","lines":["  "]},{"start":{"row":120,"column":0},"end":{"row":120,"column":2},"action":"insert","lines":["  "]},{"start":{"row":121,"column":0},"end":{"row":121,"column":2},"action":"insert","lines":["  "]},{"start":{"row":122,"column":0},"end":{"row":122,"column":2},"action":"insert","lines":["  "]},{"start":{"row":123,"column":0},"end":{"row":123,"column":2},"action":"insert","lines":["  "]},{"start":{"row":124,"column":0},"end":{"row":124,"column":2},"action":"insert","lines":["  "]},{"start":{"row":125,"column":0},"end":{"row":125,"column":2},"action":"insert","lines":["  "]},{"start":{"row":126,"column":0},"end":{"row":126,"column":2},"action":"insert","lines":["  "]},{"start":{"row":127,"column":0},"end":{"row":127,"column":2},"action":"insert","lines":["  "]},{"start":{"row":128,"column":0},"end":{"row":128,"column":2},"action":"insert","lines":["  "]},{"start":{"row":129,"column":0},"end":{"row":129,"column":2},"action":"insert","lines":["  "]},{"start":{"row":130,"column":0},"end":{"row":130,"column":2},"action":"insert","lines":["  "]},{"start":{"row":131,"column":0},"end":{"row":131,"column":2},"action":"insert","lines":["  "]},{"start":{"row":132,"column":0},"end":{"row":132,"column":2},"action":"insert","lines":["  "]},{"start":{"row":133,"column":0},"end":{"row":133,"column":2},"action":"insert","lines":["  "]},{"start":{"row":134,"column":0},"end":{"row":134,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":34,"column":0},"end":{"row":34,"column":2},"action":"insert","lines":["  "],"id":22},{"start":{"row":35,"column":0},"end":{"row":35,"column":2},"action":"insert","lines":["  "]},{"start":{"row":36,"column":0},"end":{"row":36,"column":2},"action":"insert","lines":["  "]},{"start":{"row":37,"column":0},"end":{"row":37,"column":2},"action":"insert","lines":["  "]},{"start":{"row":38,"column":0},"end":{"row":38,"column":2},"action":"insert","lines":["  "]},{"start":{"row":39,"column":0},"end":{"row":39,"column":2},"action":"insert","lines":["  "]},{"start":{"row":40,"column":0},"end":{"row":40,"column":2},"action":"insert","lines":["  "]},{"start":{"row":41,"column":0},"end":{"row":41,"column":2},"action":"insert","lines":["  "]},{"start":{"row":42,"column":0},"end":{"row":42,"column":2},"action":"insert","lines":["  "]},{"start":{"row":43,"column":0},"end":{"row":43,"column":2},"action":"insert","lines":["  "]},{"start":{"row":44,"column":0},"end":{"row":44,"column":2},"action":"insert","lines":["  "]},{"start":{"row":45,"column":0},"end":{"row":45,"column":2},"action":"insert","lines":["  "]},{"start":{"row":46,"column":0},"end":{"row":46,"column":2},"action":"insert","lines":["  "]},{"start":{"row":47,"column":0},"end":{"row":47,"column":2},"action":"insert","lines":["  "]},{"start":{"row":48,"column":0},"end":{"row":48,"column":2},"action":"insert","lines":["  "]},{"start":{"row":49,"column":0},"end":{"row":49,"column":2},"action":"insert","lines":["  "]},{"start":{"row":50,"column":0},"end":{"row":50,"column":2},"action":"insert","lines":["  "]},{"start":{"row":51,"column":0},"end":{"row":51,"column":2},"action":"insert","lines":["  "]},{"start":{"row":52,"column":0},"end":{"row":52,"column":2},"action":"insert","lines":["  "]},{"start":{"row":53,"column":0},"end":{"row":53,"column":2},"action":"insert","lines":["  "]},{"start":{"row":54,"column":0},"end":{"row":54,"column":2},"action":"insert","lines":["  "]},{"start":{"row":55,"column":0},"end":{"row":55,"column":2},"action":"insert","lines":["  "]},{"start":{"row":56,"column":0},"end":{"row":56,"column":2},"action":"insert","lines":["  "]},{"start":{"row":57,"column":0},"end":{"row":57,"column":2},"action":"insert","lines":["  "]},{"start":{"row":58,"column":0},"end":{"row":58,"column":2},"action":"insert","lines":["  "]},{"start":{"row":59,"column":0},"end":{"row":59,"column":2},"action":"insert","lines":["  "]},{"start":{"row":60,"column":0},"end":{"row":60,"column":2},"action":"insert","lines":["  "]},{"start":{"row":61,"column":0},"end":{"row":61,"column":2},"action":"insert","lines":["  "]},{"start":{"row":62,"column":0},"end":{"row":62,"column":2},"action":"insert","lines":["  "]},{"start":{"row":63,"column":0},"end":{"row":63,"column":2},"action":"insert","lines":["  "]},{"start":{"row":64,"column":0},"end":{"row":64,"column":2},"action":"insert","lines":["  "]}],[{"start":{"row":33,"column":0},"end":{"row":33,"column":1},"action":"insert","lines":["t"],"id":23}],[{"start":{"row":33,"column":1},"end":{"row":33,"column":2},"action":"insert","lines":["r"],"id":24}],[{"start":{"row":33,"column":2},"end":{"row":33,"column":3},"action":"insert","lines":["y"],"id":25}],[{"start":{"row":33,"column":3},"end":{"row":33,"column":4},"action":"insert","lines":[":"],"id":26}],[{"start":{"row":0,"column":0},"end":{"row":138,"column":0},"action":"remove","lines":["from __future__ import division","import sys","import csv","import matplotlib.pylab as plt","import cPickle","import json","import numpy as np","import codecs","from os import getcwd","from os import environ","from os.path import dirname","from os.path import join","from os.path import exists","from os.path import expanduser","from os.path import isdir","from os.path import splitext","from os import listdir","from os import mkdir","from os import path","from numpy import genfromtxt","from sklearn import datasets","from sklearn.neighbors import KNeighborsClassifier","from sklearn.metrics import accuracy_score, recall_score, precision_score, f1_score","from sklearn.externals import joblib","from keras.preprocessing import sequence","from keras.utils import np_utils","from keras.models import Sequential","from keras.optimizers import rmsprop","from keras.layers import Dense, Dropout, Activation, Embedding","from keras.layers.recurrent import LSTM, SimpleRNN, GRU","from keras.datasets import imdb","from keras.utils.np_utils import to_categorical","from keras.models import load_model","try:","  PATH = getcwd()","  f = open(PATH + '/data/' + sys.argv[1] + '/' + sys.argv[1] + '.info', 'r')","  p = open(PATH + '/data/' + sys.argv[1] + '/' + sys.argv[1] + '.param', 'r')","  columns = f.read().splitlines()","  t = json.load(p)","  label_name = str(t['label_name'])","  learning_rate = float(t['learning_rate'])","  batch_size = int(t['batch_size'])","  hidden_layer = int(t['hidden_layer'])","  hidden_unit = t['hidden_unit']","  dropout = t['dropout']","  epoch = int(t['epoch'])","  in_activation = str(t['activation_function'])","  loss_function = str(t['loss_function'])","  data_dim = int(t['data_dimension'])","  timesteps = int(t['timesteps'])","  ","  f.close()","  p.close()","    ","  #batch_size = 1","  #learning_rate = 0.001","  #hidden_unit = [32, 32, 32]","  #hidden_layer = 2","  #dropout = [0.2, 0.2, 0.2] #data dropout","  #epoch = 100","  #label_name = 'number'","  #in_activation = 'sigmoid'","  #loss_function = 'categorical_crossentropy'","  #data_dim = 64","  #timesteps = 1","","  with codecs.open(join(PATH + '/data/' + sys.argv[1] + '/' + sys.argv[1] + '.csv'), encoding = 'utf-8-sig') as csv_file:","  #with codecs.open(join( PATH + '/py/lstm/test.csv'), encoding = 'utf-8-sig') as csv_file:","      reader = csv.reader(csv_file)","      csv_data = list(reader)","      label_index = csv_data[0].index(label_name)","      ","      columns = len(csv_data[0])","      features = columns - 1","      samples = len(csv_data) - 1","      ","      X_train = np.empty((samples, features))","      Y_train = np.empty((samples,), dtype=np.int)","      ","      for i in range(samples):","        Y_train[i] = np.asarray(csv_data[i+1][label_index], dtype=np.int)","        temp = []","        for j in range(columns):","          if j != label_index:","            temp.append(csv_data[i+1][j])","        X_train[i] = np.asarray(temp, dtype=np.float)","  ","  X_train = sequence.pad_sequences(X_train, maxlen=features)","  Y_train = to_categorical(Y_train)","  ","  X_train = X_train.reshape(X_train.shape[0], timesteps, data_dim)","  ","  model = Sequential()","  model.add(LSTM(int(hidden_unit[0]), return_sequences=True, input_shape=(timesteps, data_dim)))","  model.add(Dropout(float(dropout[0])))","  ","  for i in range(hidden_layer):","    if (i == hidden_layer-1):","      model.add(LSTM(int(hidden_unit[i+1])))","    else:","      model.add(LSTM(int(hidden_unit[i+1]), return_sequences=True))","    model.add(Dropout(float(dropout[i+1])))","    ","  model.add(Dense(len(Y_train[0]), activation=in_activation))","  ","  optimizer = rmsprop(lr = learning_rate)","  model.compile(loss=loss_function, optimizer=optimizer, metrics=['accuracy'])","  ","  model.fit(X_train, Y_train, batch_size=batch_size, nb_epoch=epoch, validation_data=(X_train, Y_train))","  ","  out = open(PATH + '/data/' + sys.argv[1] + '/' + sys.argv[1] + '.out', 'w')","  P = model.predict_classes(X_train, verbose=0)","  score = model.evaluate(X_train, Y_train, verbose=0)","  ","  retP = []","  for i in range(len(P)):","    retP.append(P[i])","  json.dump({'ntb':","              {","                'samples' : samples,","                'score' : score[0],","                'accuracy' : score[1]","              }","            ,","            'tb': ","              {","                'prediction' : retP","              }","            }, out, separators=(',',':'))","            ","  if not path.exists(PATH + '/data/' + sys.argv[1] + '/h5'):","    mkdir(PATH + '/data/' + sys.argv[1] + '/h5')","  model.save(PATH + '/data/' + sys.argv[1] + '/h5/' + sys.argv[1] + '.h5')","  del model","  out.close()","","except:","  print >> sys.stderr, sys.exc_info()[0]",""],"id":27},{"start":{"row":0,"column":0},"end":{"row":149,"column":40},"action":"insert","lines":["from __future__ import division","import sys","import csv","import matplotlib.pylab as plt","import cPickle","import json","import numpy as np","import codecs","from os import getcwd","from os import environ","from os.path import dirname","from os.path import join","from os.path import exists","from os.path import expanduser","from os.path import isdir","from os.path import splitext","from os import listdir","from os import mkdir","from os import path","from numpy import genfromtxt","from sklearn import datasets","from sklearn.neighbors import KNeighborsClassifier","from sklearn.metrics import accuracy_score, recall_score, precision_score, f1_score","from sklearn.externals import joblib","from keras.preprocessing import sequence","from keras.utils import np_utils","from keras.models import Sequential","from keras.optimizers import rmsprop","from keras.layers import Dense, Dropout, Activation, Embedding","from keras.layers.recurrent import LSTM, SimpleRNN, GRU","from keras.datasets import imdb","from keras.utils.np_utils import to_categorical","from keras.models import load_model","try:","  PATH = getcwd()","  f = open(PATH + '/data/' + sys.argv[1] + '/' + sys.argv[1] + '.info', 'r')","  p = open(PATH + '/data/' + sys.argv[1] + '/' + sys.argv[1] + '.param', 'r')","  columns = f.read().splitlines()","  t = json.load(p)","  label_name = str(t['label_name'])","  learning_rate = float(t['learning_rate'])","  batch_size = int(t['batch_size'])","  hidden_layer = int(t['hidden_layer'])","  hidden_unit = t['hidden_unit']","  dropout = t['dropout']","  epoch = int(t['epoch'])","  in_activation = str(t['activation_function'])","  loss_function = str(t['loss_function'])","  data_dim = int(t['data_dimension'])","  timesteps = int(t['timesteps'])","  ","  f.close()","  p.close()","    ","  #batch_size = 1","  #learning_rate = 0.001","  #hidden_unit = [32, 32, 32]","  #hidden_layer = 2","  #dropout = [0.2, 0.2, 0.2] #data dropout","  #epoch = 100","  #label_name = 'number'","  #in_activation = 'sigmoid'","  #loss_function = 'categorical_crossentropy'","  #data_dim = 64","  #timesteps = 1","  ","  with codecs.open(join(PATH + '/data/' + sys.argv[1] + '/' + sys.argv[1] + '.csv'), encoding = 'utf-8-sig') as csv_file:","  #with codecs.open(join( PATH + '/py/lstm/test.csv'), encoding = 'utf-8-sig') as csv_file:","      reader = csv.reader(csv_file)","      csv_data = list(reader)","      label_index = csv_data[0].index(label_name)","      ","      columns = len(csv_data[0])","      features = columns - 1","      samples = len(csv_data) - 1","      ","      X_train = np.empty((samples, features))","      Y_train = np.empty((samples,), dtype=np.int)","      temp = []","  ","      for i in range(samples):","        temp.append(csv_data[i+1][label_index])","      temp = set(temp)","      dic = {}","      reverse_dic = {}","      for i, name in enumerate(temp):","        dic[name] = i","        reverse_dic[i] = name","      ","      for i in range(samples):","        Y_train[i] = np.asarray(dic[csv_data[i+1][label_index]], dtype=np.int)","        temp = []","        for j in range(columns):","          if j != label_index:","            temp.append(csv_data[i+1][j])","        X_train[i] = np.asarray(temp, dtype=np.float)","  ","  X_train = sequence.pad_sequences(X_train, maxlen=features)","  Y_train = to_categorical(Y_train)","  ","  X_train = X_train.reshape(X_train.shape[0], timesteps, data_dim)","  ","  model = Sequential()","  model.add(LSTM(int(hidden_unit[0]), return_sequences=True, input_shape=(timesteps, data_dim)))","  model.add(Dropout(float(dropout[0])))","  ","  for i in range(hidden_layer):","    if (i == hidden_layer-1):","      model.add(LSTM(int(hidden_unit[i+1])))","    else:","      model.add(LSTM(int(hidden_unit[i+1]), return_sequences=True))","    model.add(Dropout(float(dropout[i+1])))","    ","  model.add(Dense(len(Y_train[0]), activation=in_activation))","  ","  optimizer = rmsprop(lr = learning_rate)","  model.compile(loss=loss_function, optimizer=optimizer, metrics=['accuracy'])","  ","  model.fit(X_train, Y_train, batch_size=batch_size, nb_epoch=epoch, validation_data=(X_train, Y_train))","  ","  dic = open(PATH + '/data/' + sys.argv[1] + '/' + sys.argv[1] + '.dic', 'w')","  out = open(PATH + '/data/' + sys.argv[1] + '/' + sys.argv[1] + '.out', 'w')","  P = model.predict_classes(X_train, verbose=0)","  score = model.evaluate(X_train, Y_train, verbose=0)","  ","  retP = []","  for i in range(len(P)):","    retP.append(reverse_dic[P[i]])","  json.dump(reverse_dic, dic, separators=(',',':'))","  json.dump({'ntb':","              {","                'samples' : samples,","                'score' : score[0],","                'accuracy' : score[1]","              }","            ,","            'tb': ","              {","                'prediction' : retP","              }","            }, out, separators=(',',':'))","            ","  if not path.exists(PATH + '/data/' + sys.argv[1] + '/h5'):","    mkdir(PATH + '/data/' + sys.argv[1] + '/h5')","  model.save(PATH + '/data/' + sys.argv[1] + '/h5/' + sys.argv[1] + '.h5')","  del model","  out.close()","    ","except:","  print >> sys.stderr, sys.exc_info()[0]"]}],[{"start":{"row":103,"column":12},"end":{"row":103,"column":16},"action":"remove","lines":["LSTM"],"id":28},{"start":{"row":103,"column":12},"end":{"row":103,"column":13},"action":"insert","lines":["g"]}],[{"start":{"row":103,"column":12},"end":{"row":103,"column":13},"action":"remove","lines":["g"],"id":29}],[{"start":{"row":103,"column":12},"end":{"row":103,"column":13},"action":"insert","lines":["G"],"id":30}],[{"start":{"row":103,"column":13},"end":{"row":103,"column":14},"action":"insert","lines":["R"],"id":31}],[{"start":{"row":103,"column":14},"end":{"row":103,"column":15},"action":"insert","lines":["U"],"id":32}],[{"start":{"row":108,"column":16},"end":{"row":108,"column":20},"action":"remove","lines":["LSTM"],"id":33},{"start":{"row":108,"column":16},"end":{"row":108,"column":17},"action":"insert","lines":["G"]}],[{"start":{"row":108,"column":17},"end":{"row":108,"column":18},"action":"insert","lines":["R"],"id":34}],[{"start":{"row":108,"column":18},"end":{"row":108,"column":19},"action":"insert","lines":["U"],"id":35}],[{"start":{"row":110,"column":16},"end":{"row":110,"column":20},"action":"remove","lines":["LSTM"],"id":36},{"start":{"row":110,"column":16},"end":{"row":110,"column":17},"action":"insert","lines":["g"]}],[{"start":{"row":110,"column":17},"end":{"row":110,"column":18},"action":"insert","lines":["R"],"id":37}],[{"start":{"row":110,"column":17},"end":{"row":110,"column":18},"action":"remove","lines":["R"],"id":38}],[{"start":{"row":110,"column":16},"end":{"row":110,"column":17},"action":"remove","lines":["g"],"id":39}],[{"start":{"row":110,"column":16},"end":{"row":110,"column":17},"action":"insert","lines":["G"],"id":40}],[{"start":{"row":110,"column":17},"end":{"row":110,"column":18},"action":"insert","lines":["U"],"id":41}],[{"start":{"row":110,"column":17},"end":{"row":110,"column":18},"action":"remove","lines":["U"],"id":42}],[{"start":{"row":110,"column":17},"end":{"row":110,"column":18},"action":"insert","lines":["R"],"id":43}],[{"start":{"row":110,"column":18},"end":{"row":110,"column":19},"action":"insert","lines":["U"],"id":44}]]},"timestamp":1477730130804}